{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\myserver\\\\donate.shpp.com-frontend\\\\pages\\\\projects\\\\[id].js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Page from '../../layout/Page';\nimport colors from '../../theme/colors';\nimport placeholderData from '../../mock/placeholderData';\nimport ProgressBar from '../../components/ProgressBar';\n\nvar ProjectPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProjectPage, _React$Component);\n\n  function ProjectPage(props) {\n    var _this;\n\n    _classCallCheck(this, ProjectPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProjectPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmitClick\", function () {\n      var form = _this.submitRef.current.getElementsByTagName('form')[0];\n\n      if (form) {\n        form.setAttribute('target', '_blank');\n        form.submit();\n      }\n    });\n\n    _this.submitRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(ProjectPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          project = _this$props.project,\n          button = _this$props.button;\n      return __jsx(Page, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"project-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, project.name), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, __jsx(\"img\", {\n        src: project.image || placeholderData.imagePlaceholder,\n        alt: \"placeholder\",\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"project-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      })), __jsx(\"p\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, project.description), !project.completed && __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, __jsx(\"span\", {\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"funded-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"\\u0412\\u0436\\u0435 \\u0437\\u0456\\u0431\\u0440\\u0430\\u043B\\u0438: \".concat(project.amountFunded, \" \\u0433\\u0440\\u043D (\\u0437 \").concat(project.amount, \" \\u0433\\u0440\\u043D)\")), __jsx(ProgressBar, {\n        amount: project.amount,\n        funded: project.amountFunded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      })), !project.completed && __jsx(\"div\", {\n        ref: this.submitRef,\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"button-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        type: \"button\",\n        onClick: this.onSubmitClick,\n        onKeyPress: function onKeyPress() {},\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"submit-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"\\u041F\\u0456\\u0434\\u0442\\u0440\\u0438\\u043C\\u0430\\u0442\\u0438\"), __jsx(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: button\n        },\n        className: _JSXStyle.dynamic([[\"2585421197\", [colors.white, colors.green, colors.white]]]) + \" \" + \"liqpay-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }))), __jsx(_JSXStyle, {\n        id: \"2585421197\",\n        dynamic: [colors.white, colors.green, colors.white],\n        __self: this\n      }, \".project-container.__jsx-style-dynamic-selector{max-width:85%;margin:30px auto;padding:5px 20px;background-color:\".concat(colors.white, \";}.project-image.__jsx-style-dynamic-selector{max-width:100%;object-fit:cover;margin:0 auto 10px;}.button-wrapper.__jsx-style-dynamic-selector{padding:25px 0 15px;text-align:center;}.funded-text.__jsx-style-dynamic-selector{margin-bottom:5px;display:inline-block;}.submit-button.__jsx-style-dynamic-selector{background-color:\").concat(colors.green, \";color:\").concat(colors.white, \";border:none;padding:10px 25px;font-size:20px;display:inline-block;cursor:pointer;}.liqpay-form.__jsx-style-dynamic-selector{display:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx4YW1wcFxcaHRkb2NzXFxteXNlcnZlclxcZG9uYXRlLnNocHAuY29tLWZyb250ZW5kXFxwYWdlc1xccHJvamVjdHNcXFtpZF0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBdUVXLEFBRzJCLEFBT0MsQUFNSyxBQUtGLEFBSzRCLEFBV2pDLGFBQ2YsQ0FsQ21CLENBT0EsR0FXSSxFQUxILFdBWkQsQ0FPRSxNQU1yQixDQUtBLE9BSXFDLEVBckJXLEdBT2hELDhCQWVjLFlBQ00sQ0F0QnBCLGlCQXVCaUIsZUFDTSxxQkFDTixlQUNqQiIsImZpbGUiOiJDOlxceGFtcHBcXGh0ZG9jc1xcbXlzZXJ2ZXJcXGRvbmF0ZS5zaHBwLmNvbS1mcm9udGVuZFxccGFnZXNcXHByb2plY3RzXFxbaWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQYWdlIGZyb20gJy4uLy4uL2xheW91dC9QYWdlJztcbmltcG9ydCBjb2xvcnMgZnJvbSAnLi4vLi4vdGhlbWUvY29sb3JzJztcbmltcG9ydCBwbGFjZWhvbGRlckRhdGEgZnJvbSAnLi4vLi4vbW9jay9wbGFjZWhvbGRlckRhdGEnO1xuaW1wb3J0IFByb2dyZXNzQmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUHJvZ3Jlc3NCYXInO1xuXG5jbGFzcyBQcm9qZWN0UGFnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3VibWl0UmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gIH1cblxuICBvblN1Ym1pdENsaWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLnN1Ym1pdFJlZi5jdXJyZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJylbMF07XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBwcm9qZWN0LCBidXR0b24gfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2plY3QtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGgxPlxuICAgICAgICAgICAge3Byb2plY3QubmFtZX1cbiAgICAgICAgICA8L2gxPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgIHNyYz17cHJvamVjdC5pbWFnZSB8fCBwbGFjZWhvbGRlckRhdGEuaW1hZ2VQbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgYWx0PVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwcm9qZWN0LWltYWdlXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHA+XG4gICAgICAgICAgICB7cHJvamVjdC5kZXNjcmlwdGlvbn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgeyFwcm9qZWN0LmNvbXBsZXRlZCAmJiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmdW5kZWQtdGV4dFwiPlxuICAgICAgICAgICAgICAgIHtg0JLQttC1INC30ZbQsdGA0LDQu9C4OiAke3Byb2plY3QuYW1vdW50RnVuZGVkfSDQs9GA0L0gKNC3ICR7cHJvamVjdC5hbW91bnR9INCz0YDQvSlgfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxQcm9ncmVzc0JhclxuICAgICAgICAgICAgICAgIGFtb3VudD17cHJvamVjdC5hbW91bnR9XG4gICAgICAgICAgICAgICAgZnVuZGVkPXtwcm9qZWN0LmFtb3VudEZ1bmRlZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgeyFwcm9qZWN0LmNvbXBsZXRlZCAmJiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbi13cmFwcGVyXCJcbiAgICAgICAgICAgICAgcmVmPXt0aGlzLnN1Ym1pdFJlZn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN1Ym1pdC1idXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TdWJtaXRDbGlja31cbiAgICAgICAgICAgICAgICBvbktleVByZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgINCf0ZbQtNGC0YDQuNC80LDRgtC4XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBidXR0b24gfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsaXFwYXktZm9ybVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgIC5wcm9qZWN0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDg1JTtcbiAgICAgICAgICAgIG1hcmdpbjogMzBweCBhdXRvO1xuICAgICAgICAgICAgcGFkZGluZzogNXB4IDIwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9ycy53aGl0ZX07XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC5wcm9qZWN0LWltYWdlIHtcbiAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG8gMTBweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLmJ1dHRvbi13cmFwcGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDI1cHggMCAxNXB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAuZnVuZGVkLXRleHQge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAuc3VibWl0LWJ1dHRvbiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9ycy5ncmVlbn07XG4gICAgICAgICAgICBjb2xvcjogJHtjb2xvcnMud2hpdGV9O1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCAyNXB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvKiBUT0RPOiBuZWVkIHRvIHRlc3QgZGlzcGxheTpub25lIGZvcm0gc3VibWl0IGluIG9sZCBicm93c2VycyAqL1xuICAgICAgICAgIC5saXFwYXktZm9ybSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvUGFnZT5cbiAgICApO1xuICB9XG59XG5cblByb2plY3RQYWdlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uIGdldEluaXRpYWxQcm9wcyhwcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5IH0gPSBwcm9wcztcbiAgY29uc3QgcHJlZml4ID0gcHJvY2Vzcy5icm93c2VyID8gJ2h0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tLycgOiAnJzsgLy8gVE9ETzogUmVtb3ZlIHdoZW4gQ09SUyB3aWxsIGJlIGZpeGVkXG5cbiAgY29uc3QgcHJvamVjdFJlcyA9IGF3YWl0IGZldGNoKGAke3ByZWZpeH1odHRwczovL2JhY2suZG9uYXRlLjIuc2hwcC5tZS9hcGkvdjEvcHJvamVjdHMvbGlzdGApO1xuICBjb25zdCBwcm9qZWN0RGF0YSA9IGF3YWl0IHByb2plY3RSZXMuanNvbigpO1xuICBjb25zdCBidXR0b25SZXMgPSBhd2FpdCBmZXRjaChgJHtwcmVmaXh9aHR0cHM6Ly9iYWNrLmRvbmF0ZS4yLnNocHAubWUvYXBpL3YxL3Byb2plY3RzL2J1dHRvbj9pZD0ke3F1ZXJ5LmlkfWApO1xuICBjb25zdCBidXR0b25EYXRhID0gYXdhaXQgYnV0dG9uUmVzLmpzb24oKTtcbiAgY29uc3QgcHJvamVjdCA9IHByb2plY3REYXRhLnByb2plY3RzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSBxdWVyeS5pZCk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9qZWN0LFxuICAgIGJ1dHRvbjogYnV0dG9uRGF0YS5idXR0b24sXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0UGFnZTtcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\xampp\\\\\\\\htdocs\\\\\\\\myserver\\\\\\\\donate.shpp.com-frontend\\\\\\\\pages\\\\\\\\projects\\\\\\\\[id].js */\")));\n    }\n  }]);\n\n  return ProjectPage;\n}(React.Component);\n\nProjectPage.getInitialProps = function getInitialProps(props) {\n  var query, prefix, projectRes, projectData, buttonRes, buttonData, project;\n  return _regeneratorRuntime.async(function getInitialProps$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = props.query;\n          prefix = true ? 'https://cors-anywhere.herokuapp.com/' : ''; // TODO: Remove when CORS will be fixed\n\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(fetch(\"\".concat(prefix, \"https://back.donate.2.shpp.me/api/v1/projects/list\")));\n\n        case 4:\n          projectRes = _context.sent;\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(projectRes.json());\n\n        case 7:\n          projectData = _context.sent;\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(fetch(\"\".concat(prefix, \"https://back.donate.2.shpp.me/api/v1/projects/button?id=\").concat(query.id)));\n\n        case 10:\n          buttonRes = _context.sent;\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(buttonRes.json());\n\n        case 13:\n          buttonData = _context.sent;\n          project = projectData.projects.find(function (item) {\n            return item._id === query.id;\n          });\n          return _context.abrupt(\"return\", {\n            project: project,\n            button: buttonData.button\n          });\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default ProjectPage;","map":{"version":3,"sources":["C:/xampp/htdocs/myserver/donate.shpp.com-frontend/pages/projects/[id].js"],"names":["React","Page","colors","placeholderData","ProgressBar","ProjectPage","props","form","submitRef","current","getElementsByTagName","setAttribute","submit","createRef","project","button","white","green","name","image","imagePlaceholder","description","completed","amountFunded","amount","onSubmitClick","__html","Component","getInitialProps","query","prefix","fetch","projectRes","json","projectData","id","buttonRes","buttonData","projects","find","item","_id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Page from '../../layout/Page';\nimport colors from '../../theme/colors';\nimport placeholderData from '../../mock/placeholderData';\nimport ProgressBar from '../../components/ProgressBar';\n\nclass ProjectPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.submitRef = React.createRef();\n  }\n\n  onSubmitClick = () => {\n    const form = this.submitRef.current.getElementsByTagName('form')[0];\n    if (form) {\n      form.setAttribute('target', '_blank');\n      form.submit();\n    }\n  };\n\n  render() {\n    const { project, button } = this.props;\n    return (\n      <Page>\n        <div className=\"project-container\">\n          <h1>\n            {project.name}\n          </h1>\n          <div>\n            <img\n              src={project.image || placeholderData.imagePlaceholder}\n              alt=\"placeholder\"\n              className=\"project-image\"\n            />\n          </div>\n          <p>\n            {project.description}\n          </p>\n          {!project.completed && (\n            <div>\n              <span className=\"funded-text\">\n                {`Вже зібрали: ${project.amountFunded} грн (з ${project.amount} грн)`}\n              </span>\n              <ProgressBar\n                amount={project.amount}\n                funded={project.amountFunded}\n              />\n            </div>\n          )}\n          {!project.completed && (\n            <div\n              className=\"button-wrapper\"\n              ref={this.submitRef}\n            >\n              <button\n                type=\"button\"\n                className=\"submit-button\"\n                onClick={this.onSubmitClick}\n                onKeyPress={() => {\n                }}\n              >\n                Підтримати\n              </button>\n              <div\n                dangerouslySetInnerHTML={{ __html: button }}\n                className=\"liqpay-form\"\n              />\n            </div>\n          )}\n        </div>\n        <style jsx>\n          {`\n          .project-container {\n            max-width: 85%;\n            margin: 30px auto;\n            padding: 5px 20px;\n            background-color: ${colors.white};\n          }\n          \n          .project-image {\n            max-width: 100%;\n            object-fit: cover;\n            margin: 0 auto 10px;\n          }\n          \n          .button-wrapper {\n            padding: 25px 0 15px;\n            text-align: center;\n          }\n          \n          .funded-text {\n            margin-bottom: 5px;\n            display: inline-block;\n          }\n          \n          .submit-button {\n            background-color: ${colors.green};\n            color: ${colors.white};\n            border: none;\n            padding: 10px 25px;\n            font-size: 20px;\n            display: inline-block;\n            cursor: pointer;\n          }\n          \n          /* TODO: need to test display:none form submit in old browsers */\n          .liqpay-form {\n            display: none;\n          }\n        `}\n        </style>\n      </Page>\n    );\n  }\n}\n\nProjectPage.getInitialProps = async function getInitialProps(props) {\n  const { query } = props;\n  const prefix = process.browser ? 'https://cors-anywhere.herokuapp.com/' : ''; // TODO: Remove when CORS will be fixed\n\n  const projectRes = await fetch(`${prefix}https://back.donate.2.shpp.me/api/v1/projects/list`);\n  const projectData = await projectRes.json();\n  const buttonRes = await fetch(`${prefix}https://back.donate.2.shpp.me/api/v1/projects/button?id=${query.id}`);\n  const buttonData = await buttonRes.json();\n  const project = projectData.projects.find((item) => item._id === query.id);\n\n  return {\n    project,\n    button: buttonData.button,\n  };\n};\n\nexport default ProjectPage;\n"]},"metadata":{},"sourceType":"module"}